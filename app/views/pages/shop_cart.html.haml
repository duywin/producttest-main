%head
  %title Shopping cart
  :css
    .button {
        display: inline-block;
        font-size: 20px;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
        text-decoration: none;
        outline: none;
        color: #fff;
        background-color: lightblue;
        border: none;
        box-shadow: 0 9px #999;
    }

    .button:hover {
        background-color: darkcyan;
    }

    .button:active {
        background-color: cyan;
        transform: translateY(4px);
    }

    * {
        box-sizing: border-box;
    }

    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        background-image: url('https://plus.unsplash.com/premium_photo-1692386759833-3acf660742ad?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aGltYWxheWF8ZW58MHx8MHx8fDA%3D');
        background-size: cover; /* Cover the entire background */
        background-position: center; /* Center the image */
        font-family: 'Roboto', sans-serif;
    }

    .delete-btn {
        color: #ff0000; /* Red color for the cross icon */
        font-size: 50px; /* Size of the icon */
        cursor: pointer; /* Pointer cursor on hover */
    }

    .delete-btn:hover {
        color: #d40000; /* Darker red on hover */
    }

    .shopping-cart {
        width: 750px;
        margin: 80px auto;
        background: rgba(255, 255, 255, 0.9); /* Slightly transparent white background */
        box-shadow: 1px 2px 3px 0px rgba(0, 0, 0, 0.10);
        border-radius: 6px;
        display: flex;
        flex-direction: column;
    }

    .title {
        height: 60px;
        border-bottom: 1px solid #E1E8EE;
        padding: 20px 30px;
        color: #5E6977;
        font-size: 18px;
        font-weight: 400;
    }

    .item {
        padding: 20px 30px;
        display: flex;
        border-bottom: 1px solid #E1E8EE;
    }

    .image {
        margin-right: 20px;
    }

    .image img {
        width: 30px; /* Set width to 30px */
        height: 30px; /* Set height to 30px */
        object-fit: cover; /* Ensure the image covers the area */
    }

    .description {
        padding-top: 10px;
        margin-right: 20px;
        flex-grow: 1;
    }

    .quantity {
        display: flex;
        align-items: center;
        margin-right: 20px;
    }

    .quantity input {
        width: 50px; /* Fixed width for quantity input */
        height: 30px; /* Fixed height for quantity input */
        text-align: center;
        font-size: 16px;
        color: #43484D;
    }

    .total-price {
        width: 83px;
        text-align: center;
        font-size: 16px;
        color: #43484D;
    }

    @media (max-width: 800px) {
        .shopping-cart {
            width: 100%;
            height: auto;
            overflow: hidden;
        }

        .item {
            flex-wrap: wrap;
            justify-content: center;
        }

        .image,
        .quantity,
        .description {
            width: 100%;
            text-align: center;
            margin: 6px 0;
        }
    }
%body
  / Shopping Cart View
%div{"data-cart-id" => "#{@cart.id}"}
  .shopping-cart
    .title Your Shopping Cart
    .cart-view
      %a.button{:href => shop_path, :style => "margin-right: 10px;"} Back
      - if @cart_items.present?
        - @cart_items.each do |item|
          .item{"data-cart-item-id" => "#{item.id}", "data-stock" => "#{item.product.stock}"}
            .image
              %img{:alt => "#{item.product.name}", :src => "#{item.product.picture}"}/
            .description
              %span= item.product.name
            .quantity
              %button.btn.btn-secondary{"data-action" => "decrement", "data-id" => "#{item.id}", :type => "button"} -
              %input.form-control.quantity-input{"data-id" => "#{item.id}", :name => "cart_item[quantity]", :readonly => "readonly", :type => "text", :value => "#{item.quantity}"}/
              %button.btn.btn-secondary{"data-action" => "increment", "data-id" => "#{item.id}", :type => "button"} +
            .total-price
              - if item.price_changed?
                / Show old price if there's a promotion
                %span.old-price{:style => "text-decoration: line-through; color: red;"}
                  = number_to_currency(item.original_price.to_f * item.quantity)
              %span.new-price= number_to_currency(item.price.to_f * item.quantity)
            .buttons
              %span.delete-btn{"data-id" => "#{item.id}", :style => "cursor: pointer; color: #ff0000; font-size: 20px;", :title => "Remove item"} âœ–
      - else
        .item
          .description{:style => "text-align: center; width: 100%;"}
            %span Your cart is empty
    - if @cart.present?
      %div{:style => "margin-top: 20px; display: flex; justify-content: space-between; align-items: center;"}
        %div
          %strong Total:
          %span#old-cart-total{:style => "text-decoration: line-through; color: red; margin-right: 10px;"}
          %span#new-cart-total= number_to_currency(@cart.total_price)
          #discount-line{:style => "display: none; margin-top: 10px;"}
            %strong#discount-message
        %div{:style => "display: flex; align-items: center;"}
          %input#promotion-code{:placeholder => "Enter promo code", :style => "margin-right: 10px; padding: 5px;", :type => "text"}/
          %button#apply-promo-btn.button Apply
      .text-center{:style => "margin-top: 20px;"}
        %button#checkout-btn Checkout

= javascript_include_tag 'views/page/delete_item'
= javascript_include_tag 'views/page/promotion_handling'
= javascript_include_tag 'views/page/price_update'
= javascript_include_tag 'views/page/quantity_adjustment'
= javascript_include_tag 'views/page/checkout'

%form#redirect-form{ action: delivery_form_path, method: 'get' }
  %input{ type: 'hidden', name: 'cart_id', value: '' }




